# Beowulf Discord Bot - Example Environment File
# Copy to .env and fill in actual secrets/IDs. Do NOT commit real values.

############################
# Core Runtime & Discord
############################
LIVE_ENVIRONMENT=false            # true = use live tokens/channels/roles, false = test
BOT_SINGLE_INSTANCE=true          # Prevent multiple local processes
BOT_HTTP_PORT=3000                # Express server port
DISCORD_MESSAGE_MAX=1900          # Safety cap for message lengths

CLIENT_TOKEN=your-test-discord-bot-token
TEST_CLIENT_TOKEN=your-test-discord-bot-token
CLIENT_ID=your-live-client-id     # Used for command deploy
TEST_CLIENT_ID=your-test-client-id
GUILD_ID=live-guild-id            # Primary guild
TEST_GUILD_ID=test-guild-id

############################
# OpenAI / Models / Persona
############################
OPENAI_API_KEY=sk-your-openai-key
OPENAI_RESPONSES_MODEL=gpt-4o-mini   # Primary responses model
KNOWLEDGE_AI_MODEL=gpt-4o-mini       # Knowledge queries fallback
RESPONSES_MODEL=gpt-5                # Used in responses-run.js (verify availability)
EMBEDDING_MODEL=text-embedding-3-small
BOT_TEMPERATURE=0.6
BOT_TEMP_MIN=0.5
BOT_TEMP_MAX=0.7
BOT_INSTRUCTIONS="You are a helpful Beowulf org assistant."
ON_QUOTA_MESSAGE="I'm temporarily out of AI capacity. Try again shortly."

############################
# Feature Toggles (Retrieval & Ingest)
############################
HIT_LLM_EXTRACT=true
TOOL_AGENT_ENABLED=true
LEGACY_INTENT_ROUTER=false
AUTO_ROUTER_ENABLED=true
BANTER_USE_LLM=true
KNOWLEDGE_RETRIEVAL=true
KNOWLEDGE_PREFER_VECTOR=true
CHATGPT_KNOWLEDGE_LOOKUP=true         # Legacy /api/knowledge lookup
CHATGPT_KNOWLEDGE_LIMIT=3             # Max rows pulled from knowledge table per query
CHATGPT_KNOWLEDGE_DOC_LOOKUP=true     # Enable vector search over knowledge_docs uploads
CHATGPT_KNOWLEDGE_DOC_LIMIT=3         # Max knowledge_doc chunks to surface
CHATGPT_KNOWLEDGE_DOC_MIN_SCORE=0.28  # Similarity cutoff (0-1) for knowledge_docs hits
CHATGPT_KNOWLEDGE_DOC_SCAN_LIMIT=600  # Rows to scan when falling back to keyword search (0 disables)
CHATGPT_KNOWLEDGE_DOC_SCAN_PAGE=150   # Page size per fallback scan request
CHATGPT_ENTITY_TOP_K=5                # Max entity catalog matches returned per prompt
CHATGPT_ENTITY_INDEX_REFRESH_MS=1800000  # How often to rebuild entity catalog (ms)
CHATGPT_ENTITY_DOC_LIMIT=400          # Knowledge docs included in entity catalog
CHATGPT_ENTITY_REBUILD_DEBOUNCE_MS=1000  # Delay before auto rebuild after cache refresh (ms)
USER_OPINION_USE_LLM=true

KNOWLEDGE_INGEST_ENABLE=true      # Master switch for ingestion pipelines
CHAT_VECTOR_INGEST_ON_START=false # Batch ingest historical chat at startup
CHAT_VECTOR_INGEST_LIVE=true      # Live per-message ingest
SAVE_MESSAGES=false               # Persist raw messages for scoring
CHAT_SUMMARY_ENABLE=true          # 6h summary ingest
HIT_INGEST_ENABLE=true            # 6h hit logs ingest
PLAYER_STATS_INGEST_ENABLE=true   # 1h player stats ingest
CHAT_VECTOR_MAX=2000              # Retention limit
INGEST_MAX=0                      # 0 = all items in batch ingest
INGEST_CONCURRENCY=2              # 1-8 recommended

############################
# knowledge-doc-ingest Slash Command
############################
DOC_INGEST_ROLE_IDS=live_doc_curator_role
TEST_DOC_INGEST_ROLE_IDS=test_doc_curator_role
DOC_INGEST_MAX_FILE_BYTES=4000000
DOC_INGEST_CHUNK_SIZE=1600
DOC_INGEST_CHUNK_MIN=600
DOC_INGEST_CHUNK_MAX=4000
DOC_INGEST_CHUNK_OVERLAP=200
DOC_INGEST_MAX_CHUNKS=25

############################
# player-item-upload Slash Command
############################
PLAYER_ITEM_UPLOAD_ROLE_IDS=live_item_curator_role
TEST_PLAYER_ITEM_UPLOAD_ROLE_IDS=test_item_curator_role
PLAYER_ITEM_UPLOAD_MAX_FILE_BYTES=2000000
PLAYER_ITEM_UPLOAD_MAX_ROWS=1000
PLAYER_ITEM_UPLOAD_EXISTING_LIMIT=20000

############################
# component-item-upload Slash Command
############################
COMPONENT_ITEM_UPLOAD_ROLE_IDS=live_component_curator_role
TEST_COMPONENT_ITEM_UPLOAD_ROLE_IDS=test_component_curator_role
COMPONENT_ITEM_UPLOAD_MAX_FILE_BYTES=2000000
COMPONENT_ITEM_UPLOAD_MAX_ROWS=1000
COMPONENT_ITEM_UPLOAD_EXISTING_LIMIT=20000

############################
# ship-list-upload Slash Command
############################
SHIP_LIST_UPLOAD_ROLE_IDS=live_ship_curator_role
TEST_SHIP_LIST_UPLOAD_ROLE_IDS=test_ship_curator_role
SHIP_LIST_UPLOAD_MAX_FILE_BYTES=2000000
SHIP_LIST_UPLOAD_MAX_ROWS=1000
SHIP_LIST_UPLOAD_EXISTING_LIMIT=20000

############################
# Market / UEX Data
############################
UEX_FRESH_LOAD_ON_START=false     # Force full UEX refresh sequence on boot
SERVER_URL=https://backend.example.com
API_SCI_API_ROUTES=/api/starcitizen
API_CLASS=/api/classes            # Deprecated/legacy
API_GAME_ENTITIES_ROUTES=/api/game-entities
API_ITEMS_FPS_ROUTES=/api/items-fps
API_ITEMS_COMPONENTS_ROUTES=/api/items-components
API_LIST_SHIPS_ROUTES=/api/list-ships
DEBUG_MARKET_FALLBACK=false

# Optional sync limits (override defaults as needed)
GAME_ENTITIES_COMMODITY_LIMIT=5000
GAME_ENTITIES_ITEM_LIMIT=5000
GAME_ENTITIES_SHIP_LIMIT=2000
GAME_ENTITIES_LOCATION_LIMIT=5000
GAME_ENTITIES_FPS_LIMIT=5000
GAME_ENTITIES_COMPONENT_LIMIT=5000
GAME_ENTITIES_SHIP_LIST_LIMIT=2000

############################
# Channels (Comma-separated lists & IDs)
############################
CHANNELS=live_channel_id_1,live_channel_id_2
TEST_CHANNELS=test_channel_id_1,test_channel_id_2
HITTRACK_CHANNEL_ID=live_hit_forum_channel
TEST_HITTRACK_CHANNEL_ID=test_hit_forum_channel
FLEETLOG_CHANNEL_ID=live_fleet_log_channel
TEST_FLEETLOG_CHANNEL_ID=test_fleet_log_channel
FLEET_COMMANDERS_CHANNEL=live_fleet_commanders_channel
TEST_FLEET_COMMANDERS_CHANNEL=test_fleet_commanders_channel
EVENTS_PUBLIC_CHANNEL=live_events_public
TEST_EVENTS_PUBLIC_CHANNEL=test_events_public
EVENTS_PROSPECT_CHANNEL=live_events_prospect
TEST_EVENTS_PROSPECT_CHANNEL=test_events_prospect
EVENTS_CREW_CHANNEL=live_events_crew
TEST_EVENTS_CREW_CHANNEL=test_events_crew
EVENTS_MARAUDER_CHANNEL=live_events_marauder
TEST_EVENTS_MARAUDER_CHANNEL=test_events_marauder
AUDIT_CHANNEL=live_audit_channel
TEST_AUDIT_CHANNEL=test_audit_channel
SHIP_LOG_CHANNEL=live_ship_log_channel          # Deprecated
TEST_SHIP_LOG_CHANNEL=test_ship_log_channel     # Deprecated

############################
# Roles (Prestige & Membership)
############################
PROSPECT_ROLE=live_prospect_role
TEST_PROSPECT_ROLE=test_prospect_role
FRIENDLY_ROLE=live_friendly_role
TEST_FRIENDLY_ROLE=test_friendly_role
VERIFIED_ROLE=live_verified_role
TEST_VERIFIED_ROLE=test_verified_role
NEW_USER_ROLE=live_new_user_role
TEST_NEW_USER_ROLE=test_new_user_role
RONIN_ROLE=live_ronin_role
TEST_RONIN_ROLE=test_ronin_role
FLEET_COMMANDER_ROLE=live_fleet_commander_role
TEST_FLEET_COMMANDER_ROLE=test_fleet_commander_role

# Prestige Raptor
RAPTOR_1_ROLE=live_raptor_1
RAPTOR_2_ROLE=live_raptor_2
RAPTOR_3_ROLE=live_raptor_3
RAPTOR_4_ROLE=live_raptor_4
RAPTOR_5_ROLE=live_raptor_5
RAPTOR_1_TEST_ROLE=test_raptor_1
RAPTOR_2_TEST_ROLE=test_raptor_2
RAPTOR_3_TEST_ROLE=test_raptor_3
RAPTOR_4_TEST_ROLE=test_raptor_4
RAPTOR_5_TEST_ROLE=test_raptor_5

# Prestige Corsair
CORSAIR_1_ROLE=live_corsair_1
CORSAIR_2_ROLE=live_corsair_2
CORSAIR_3_ROLE=live_corsair_3
CORSAIR_4_ROLE=live_corsair_4
CORSAIR_5_ROLE=live_corsair_5
CORSAIR_1_TEST_ROLE=test_corsair_1
CORSAIR_2_TEST_ROLE=test_corsair_2
CORSAIR_3_TEST_ROLE=test_corsair_3
CORSAIR_4_TEST_ROLE=test_corsair_4
CORSAIR_5_TEST_ROLE=test_corsair_5

# Prestige Raider
RAIDER_1_ROLE=live_raider_1
RAIDER_2_ROLE=live_raider_2
RAIDER_3_ROLE=live_raider_3
RAIDER_4_ROLE=live_raider_4
RAIDER_5_ROLE=live_raider_5
RAIDER_1_TEST_ROLE=test_raider_1
RAIDER_2_TEST_ROLE=test_raider_2
RAIDER_3_TEST_ROLE=test_raider_3
RAIDER_4_TEST_ROLE=test_raider_4
RAIDER_5_TEST_ROLE=test_raider_5

############################
# Moderator / Admin Role Lists
############################
MODERATOR_ROLES=live_moderator_role_1,live_moderator_role_2
TEST_MODERATOR_ROLES=test_moderator_role_1,test_moderator_role_2
ADMIN_ROLES=live_admin_role_1,live_admin_role_2
TEST_ADMIN_ROLES=test_admin_role_1,test_admin_role_2

############################
# Leaderboards & External APIs
############################
API_CIG_LEADERBOARD_SB=https://api.cig.example.com/leaderboards/sb

############################
# Embeddings / Vector Store
############################
VECTOR_STORE=vector_store_id
DAYS_OLD=30                   # Planned pruning threshold (not currently active)

############################
# Hit / Fleet Tracking
############################
DEBUG_HIT_LOGS=0              # Set to 1 for verbose hit logs

############################
# Security / Org Keys
############################
ORG_API_KEY=org-shared-api-key

############################
# Debug Flags
############################
DEBUG_RETRIEVAL=false
DEBUG_MARKET_FALLBACK=false

############################
# Deprecated / Legacy (Keep for reference)
############################
QUEUE_CHANNEL=deprecated_queue_channel
SESH_ID=deprecated_sesh_id
PROGRESSION_MOD_ROLES=deprecated_progression_roles
TEST_PROGRESSION_MOD_ROLES=deprecated_test_progression_roles
